<!-- Window y Date
Cada segundo la ventana va sobreescribiendo el contenido para cargar un nuevo segundo.
s se actualiza cada segundo, m cada minuto y h cada hora.-->
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>U3. Práctica 2-1</title>
    <script type="text/javascript">
    var crono = new Object();
    var ventana;
    var s;
    var m;
    var h;

    crono.empezar=function() {
      ventana = window.open("", "", "width=300, height=200");
      ventana.document.body.innerHTML = "00:00:00";
      crono.d = new Date().getTime();
      crono.contar();
    }

    crono.contar=function() {
      var t = new Date().getTime();

      var r = new Date(t-crono.d);
      var s = r.getUTCSeconds();
      var m = r.getUTCMinutes();
      var h = r.getUTCHours();

      ventana.document.body.innerHTML = crono.formatear(h) + ":" + crono.formatear(m) + ":" + crono.formatear(s);
      crono.timer = setTimeout(crono.contar, 1000);

    }


    crono.reiniciar=function() {
      s = "00";
      m = "00";
      h = "00";
      ventana.document.body.innerHTML = h + ":" + m + ":" + s;
    }


    crono.formatear=function(i) {
      if (i<10) {
        i = "0" + i;
      }
      return i;
    }


    </script>
  </head>
  <body>
    <h1>Cronómetro</h1>
    <form name="formulario">
      <input type="button" name="boton" value="Contar" onclick="crono.empezar()"></input>
      <input type="button" name="boton" value="Parar" onclick="crono.reiniciar()"></input>
    </form>

  </body>
</html>
